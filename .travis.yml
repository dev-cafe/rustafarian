dist: xenial
language: python
python:
- 3.7
- 3.6
- 3.5
cache:
  pip: true
  directories:
  - "$HOME/.cargo"
install:
- pip install --upgrade pip pipenv
- curl https://sh.rustup.rs -sSf | sh -s -- -y -v --default-toolchain nightly-2019-01-15
- source "$HOME"/.cargo/env
- pipenv install --dev
before_script:
- rustc --version
script:
- pipenv run pyo3-pack develop
env:
  global:
    secure: "nqntM9RMd+L1PO3GenOK9KOvh+GbuT9Wwg+QEKzSMaA67UfToUoFyq3BmzLjO9dnR2Cr0438VbN8itwu4tWHbR/zi8EdUdOrE2Eu8uX6XktrjYZUbXgQT2Cs0OaIzhUXLrAMTfGjXnqGcki+BWcZ0ThrVu4B9ja3O7RgFPuDwFJAwFZgHrV8Jk+duQmse9LEENSqM9Awwgnd3Fo/nMqHF7SXAf/fUiLKKvFF6XpjOavTAtmSxhkFHf2evB+bvGP3nRwbGR9tLvFsePq6bgidFpbxj/F3G1vtqpF5dOnc3Ice7ik5iTTrtAdoeIR5iGankzq9b590qaV06QVvWElEchcXRDDYKUef217stEdQHG1z60ROAg6ufXXAXZs02Z8MqvmG4NRP80XrmUfKtXpEzLIh1pLKKF1WUePMSgwW8yFLkFp2tBmZqsrRa4bDnl25k1EttVM6B1xc3WB02bU712NanJEjslJsZ9vps9mL6qNonuWKbLSMhAQcb8TcPtndZ2hbpfjdu3INysXf8dvw4YJti90Svdniysj8OIfHzsfTQLYbsjibdsZRSnxoe+ggZrQP3iB+HbULqx/w6fP7DW6fC7duKbO5/LttOlHcJlLBWeRbg1KMBkd91efmFLUKfxHmz/ilhjJIKiZmUR+wRXWeybwy4hM1gvDA8h3+VV4="
deploy:
  provider: script
  script: ".ci/deploy_to_pypi.sh"
  on:
    tags: true
    repo: robertodr/parselglossy
    python: 3.6
